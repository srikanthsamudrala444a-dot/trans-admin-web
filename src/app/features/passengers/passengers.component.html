<div class="passengers-container">
      <div class="page-header">
        <h1>Passengers Management</h1>
        <button mat-raised-button color="primary" (click)="openAddPassengerDialog()">
          <mat-icon>add</mat-icon>
          Add Passenger
        </button>
      </div>
      
      <mat-card class="filter-card">
        <mat-card-content>
          <div class="filters">
            <mat-form-field appearance="outline">
              <mat-label>Status</mat-label>
              <mat-select>
                <mat-option value="all">All Status</mat-option>
                <mat-option value="active">Active</mat-option>
                <mat-option value="banned">Banned</mat-option>
              </mat-select>
            </mat-form-field>
            
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput placeholder="Search by name, email, or phone">
              <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card>
        @if(loading){
        <div class="loader">
          <mat-spinner></mat-spinner>
          <p>Loading passengers...</p>
        </div>
        }@else if(error){
        <div class="error-message">
          <mat-icon color="warn">error</mat-icon>
          <p>{{ error }}</p>
          <button mat-button color="primary" (click)="getAllPassengers()">Retry</button>
        </div>
        }@else {
        
        <mat-table [dataSource]="dataSource">
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef>Passenger</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              <div class="passenger-info">
                <div class="passenger-avatar">
                  {{ (passenger.name || passenger.firstName || 'U').charAt(0) }}
                </div>
                <div>
                  <div class="passenger-name">
                    {{ passenger.name || passenger.firstName + ' ' + (passenger.lastName || '') }}
                  </div>
                  <div class="passenger-email">{{ passenger.email }}</div>
                </div>
              </div>
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="contactNumber">
            <mat-header-cell *matHeaderCellDef>Phone Number</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              {{ passenger.contactNumber || passenger.phoneNumber || passenger.phone || 'N/A' }}
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="totalRides">
            <mat-header-cell *matHeaderCellDef>Total Rides</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              {{ passenger.totalRides || passenger.ridesCount || 0 }}
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="rating">
            <mat-header-cell *matHeaderCellDef>Rating</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              <div class="rating" *ngIf="passenger.rating || passenger.averageRating">
                <mat-icon class="star-icon">star</mat-icon>
                {{ (passenger.rating || passenger.averageRating || 0) | number:'1.1-1' }}
              </div>
              <span *ngIf="!passenger.rating && !passenger.averageRating" class="no-rating">
                No rating
              </span>
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              <mat-chip [class]="getStatusClass(passenger)">
                {{ getStatusText(passenger) }}
              </mat-chip>
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="joinDate">
            <mat-header-cell *matHeaderCellDef>Join Date</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              {{ (passenger.createdAt || passenger.joinDate || passenger.registrationDate) | date:'shortDate' }}
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
            <mat-cell *matCellDef="let passenger">
              <button mat-icon-button color="primary" [routerLink]="['/passengers', passenger.id || passenger.passengerId]" matTooltip="View Passenger Details">
                <mat-icon>visibility</mat-icon>
              </button>
              <button mat-icon-button [color]="passenger.isBanned ? 'accent' : 'warn'">
                <mat-icon>{{passenger.isBanned ? 'check_circle' : 'block'}}</mat-icon>
              </button>
            </mat-cell>
          </ng-container>
          
          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
        
        @if(passengers.length === 0 && !loading && !error){
        <div class="no-data">
          <mat-icon>people_outline</mat-icon>
          <p>No passengers found</p>
        </div>
        }
        
        }
      </mat-card>
    </div>

<mat-paginator
  #paginator
  [length]="totalItems"
  [pageSize]="itemsPerPage"
  [pageSizeOptions]="[5, 10, 25, 50]"
  [showFirstLastButtons]="true"
  aria-label="Passengers pagination"
>
</mat-paginator>

    